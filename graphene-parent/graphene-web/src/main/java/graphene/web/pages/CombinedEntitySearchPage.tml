<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<html t:type="graphene/layout" title="Entity Search"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
	xmlns:p="tapestry:parameter" lang="en">
<!-- Most of the page content, including <head>, <body>, etc. tags, comes 
		from Layout.tml -->
<!-- This is a span 10 in the bootstrap layout. You just need to add one 
		or more fluid rows here. -->
<style>
<!--
-->
.ui-buttonset .ui-button {
	margin-left: 0;
	margin-right: 0em;
}
</style>
<section id="widget-grid" class="">
	<t:zone t:id="listZone" id="listZone"
		t:update="prop:zoneUpdateFunction">
		<div class="row">
			<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">


				<div class="jarviswidget jarviswidget-color-darken" id="wid-id-0"
					data-widget-editbutton="false">
					<!-- We can't use the form's id in the css because the Zone messes 
									with it, so we add a div with its own id. -->
					<div id="entityFilter" class="well">
						<form t:type="form" t:id="filterForm" t:zone="listZone">
							<legend>Search for Documents containing Entity</legend>

							<input class="input-block-level" t:id="searchValue"
								t:type="TextField" size="50" t:validate="maxLength=255"
								value="searchValue" /> <input class="btn btn-primary btn-sm"
								type="submit" value="Search" title="Search" />
						</form>
						<t:if test="results">
										Showing ${results.numberOfResultsReturned} hits
										out of ${results.numberOtResultsTotal}
									</t:if>
					</div>
				</div>



				<div class="jarviswidget jarviswidget-color-darken" id="wid-id-1"
					data-widget-editbutton="false">
					<header>
						<span class="widget-icon"> <i class="fa fa-table"></i>
						</span>
						<h2>Results</h2>

					</header>
					<!-- widget div-->
					<div>



						<!-- widget content -->
						<div class="widget-body no-padding">
							<!-- WIP legend -->
							<div class="row">
								<div class="col-sm-1"></div>
								<div class="col-sm-11">
									<span style="margin-right: 3px"> Legend: </span> <span
										class="label bg-color-red txt-color-white"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="An attribute or any other identifier that contains the term you searched for.">
										Item Containing Search Term </span> <span class="label label-success"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="Example: date the report was filed on or the date it was received.">
										Dates Relevant to Report </span> <span class="label label-info"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="The amount of money involved with a report.">
										Amount Involved </span> <span
										class="label bg-color-orange txt-color-white"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="Formal name of a person or group involved or mentioned in the report.">
										Entity Name </span> <span
										class="label bg-color-yellow txt-color-white"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="Street address, state, province, or any location identifier.">
										Address </span> <span class="label bg-color-magenta txt-color-white"
										style="margin-right: 3px" data-placement="top"
										rel="popover-hover"
										data-content="Any other attribute or identifier.">
										Attribute </span>
								</div>
							</div>
							<!-- End legend -->

							<div class="widget-body-toolbar"></div>
							<t:jquery.datatable t:id="resultsdt"
								t:source="populatedTableResults" t:model="model"
								t:row="currentEntity" t:options="options"
								class="table table-striped table-bordered table-hover"
								t:rowsPerPage="20" t:empty="block:emptyResults">

								<p:actionsCell>
									<t:if test="reportPageLink">
										<t:pagelink class="btn btn-default" page="prop:reportPageLink"
											context="reportId" target="reportId">
											<i class="fa fa-folder-open-o" /> ${reportType} ${reportId}
												</t:pagelink>
										<br /><p:else>Report View Unavailable</p:else>
									</t:if>

									<a class="btn btn-default" href="${extLink}" target="extjs">
										<i class="fa fa-code-fork"> </i> Graph
									</a>
								</p:actionsCell>
								<p:scoreCell>
											${score}
								</p:scoreCell>
								<p:informationIconsCell>
									<t:loop source="iconList" value="currentIcon">
										<span class="${currentIcon} label label-danger"
											rel="popover-hover" data-placement="top">&nbsp; </span>
									</t:loop>
								</p:informationIconsCell>
								<p:dateCell>
									<span class="fa fa-calendar label label-success">&nbsp;${currentEntity.get('firstDate')}
									</span>
								</p:dateCell>
								<p:amountCell>
					${amount}
				</p:amountCell>
								<p:nameListCell>
									<t:loop source="nameList" value="currentName">
										<a class="btn btn-xs ${styleForName}" t:type="pagelink"
											page="graphene/CombinedEntitySearchPage"
											context="currentName"> ${currentName}</a>
										<br />
									</t:loop>
								</p:nameListCell>
								<p:addressListCell>
									<t:loop source="addressList" value="currentAddress">
										<a class="btn btn-xs ${styleForAddress}" t:type="pagelink"
											page="graphene/CombinedEntitySearchPage"
											context="currentAddress"> ${currentAddress}</a>
										<br />
									</t:loop>
								</p:addressListCell>
								<p:communicationIdentifierListCell>
									<t:loop source="cIdentifierList" value="currentCommunicationId">
										<a class="btn btn-xs ${styleForIdentifier}" t:type="pagelink"
											page="graphene/CombinedEntitySearchPage"
											context="currentCommunicationId">
											${currentCommunicationId}</a>

									</t:loop>
								</p:communicationIdentifierListCell>
								<p:identifierListCell>
									<t:loop source="identifierList" value="currentIdentifier">
										<a class="btn btn-xs ${styleForIdentifier}" t:type="pagelink"
											page="graphene/CombinedEntitySearchPage"
											context="currentIdentifier"> ${currentIdentifier}</a>

									</t:loop>
								</p:identifierListCell>
							</t:jquery.datatable>

							<t:block t:id="emptyResults">
								<div id="noentitys">(No results found)</div>
							</t:block>

						</div>
						<!-- end widget content -->
					</div>
					<!-- end widget div -->
				</div>
				<!-- end widget -->
			</article>
		</div>
		<script src="${context:core/js/SearchTips.js}" />
	</t:zone>
</section>
</html>